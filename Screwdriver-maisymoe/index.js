(function(a,n,r,c,d,p,f,u){"use strict";const b=r.findByStoreName("DeveloperOptionsStore"),g=r.findByProps("setDeveloperOptionSettings"),s=function(t){return g.setDeveloperOptionSettings({bugReporterEnabled:t})};function v(){vendetta.metro.findByProps("ChatListAnimationExperiment").ChatListAnimationExperiment.getCurrentConfig().shouldAnimateAndroid=!0;const t=b.isBugReporterEnabled;s(!n.storage.disableBugReporter);const i=c.before("setDeveloperOptionSettings",g,function(e){var o;!n.storage.disableBugReporter||!(!((o=e[0])===null||o===void 0)&&o.bugReporterEnabled)||(e[0].bugReporterEnabled=!1)});return function(){i(),s(t)}}const R=r.findByProps("addFiles","popFirstFile");function S(){return c.before("addFiles",R,function(t){var i;n.storage.fixJSONUploads&&((i=t[0])===null||i===void 0||i.files.forEach(function(e){e.mimeType==="application/json"&&(e.mimeType="text/plain")}))})}const{FormSection:y,FormRow:E,FormSwitchRow:B,FormDivider:F}=u.Forms,h=[{title:"Quality of Life",items:[{label:"Forcibly disable Bug Reporter",subLabel:"Prevent enabling Discord's Bug Reporter, since the value of built-in toggle does not persist.",icon:"ic_noise_cancellation_disabled",setting:"disableBugReporter",action:function(){return s(!1)}}]},{title:"Fixes",items:[{label:"JSON file uploads",subLabel:"Fix a long-standing Discord bug causing JSON files to be uploaded with their metadata as contents.",icon:"ic_file_upload_24px",setting:"fixJSONUploads"}]}];function x(){return p.useProxy(n.storage),React.createElement(d.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},h.map(function(t,i){return React.createElement(y,{title:t.title,titleStyleType:i===0?"no_border":void 0},t.disclaimer&&React.createElement(d.ReactNative.View,{style:{marginHorizontal:10,marginBottom:10}},React.createElement(u.HelpMessage,{messageType:0},t.disclaimer)),t.items.map(function(e,o){return React.createElement(React.Fragment,null,React.createElement(B,{label:e.label,subLabel:e.subLabel,leading:e.icon&&React.createElement(E.Icon,{source:f.getAssetIDByName(e.icon)}),disabled:e.disabled,value:n.storage[e.setting],onValueChange:function(m){var l;(l=e.action)===null||l===void 0||l.call(e,m),n.storage[e.setting]=m}}),o!==t.items.length-1&&React.createElement(F,null))}))}))}n.storage.fixJSONUploads??=!0;const N=[v(),S()],O=function(){return N.forEach(function(t){return t()})};return a.onUnload=O,a.settings=x,a})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components);
