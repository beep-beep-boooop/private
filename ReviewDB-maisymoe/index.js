(function(R,a,o,E,t,O,M,v,b,m,d,S,z){"\x75\x73\x65\x20\x73\x74\x72\x69\x63\x74";const I="\x39\x31\x35\x37\x30\x33\x37\x38\x32\x31\x37\x34\x37\x35\x32\x38\x30\x39",p="\x68\x74\x74\x70\x73\x3a\x2f\x2f\x6d\x61\x6e\x74\x69\x2e\x76\x65\x6e\x64\x69\x63\x61\x74\x65\x64\x2e\x64\x65\x76",h=p+"\x2f\x61\x70\x69\x2f\x72\x65\x76\x69\x65\x77\x64\x62";var j=Object.freeze({__proto__:null,API_URL:h,BASE_URL:p,CLIENT_ID:I});const{getCurrentUser:C}=o.findByStoreName("\x55\x73\x65\x72\x53\x74\x6f\x72\x65"),{meta:V}=o.findByProps("\x63\x6f\x6c\x6f\x72\x73","\x6d\x65\x74\x61"),{useThemeContext:J}=o.findByProps("\x75\x73\x65\x54\x68\x65\x6d\x65\x43\x6f\x6e\x74\x65\x78\x74"),A=function(e){return e.sender.discordID===C()?.id||T.includes(C()?.id)};async function c(e,n){const r=await(await fetch(e,{headers:{"\x63\x6f\x6e\x74\x65\x6e\x74\x2d\x74\x79\x70\x65":"\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2f\x6a\x73\x6f\x6e",accept:"\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2f\x6a\x73\x6f\x6e"},...n})).json();if(r.success===!1)throw new Error(r.message);return r}const w=function(e){return V.resolveSemanticColor(J()?.theme??"\x64\x61\x72\x6b",E.semanticColors[e])};var X=Object.freeze({__proto__:null,canDeleteReview:A,jsonFetch:c,useThemedColor:w});const N=async function(e){return(await c(h+`/users/${e}/reviews`)).reviews},D=async function(){return await c(p+"\x2f\x61\x64\x6d\x69\x6e\x73")},P=async function(e,n){return await c(h+`/users/${e}/reviews`,{method:"\x50\x55\x54",body:JSON.stringify({comment:n,token:a.storage.authToken})})},_=async function(e,n){return await c(h+`/users/${e}/reviews`,{method:"\x44\x45\x4c\x45\x54\x45",body:JSON.stringify({reviewid:n,token:a.storage.authToken})})},B=async function(e){return await c(h+"\x2f\x72\x65\x70\x6f\x72\x74\x73",{method:"\x50\x55\x54",body:JSON.stringify({reviewid:e,token:a.storage.authToken})})};var Y=Object.freeze({__proto__:null,addReview:P,deleteReview:_,getAdmins:D,getCurrentUser:async function(){return await c(h+"\x2f\x75\x73\x65\x72\x73",{method:"\x50\x4f\x53\x54",body:JSON.stringify({token:a.storage.authToken})})},getReviews:N,reportReview:B});const{hideActionSheet:H}=o.findByProps("\x6f\x70\x65\x6e\x4c\x61\x7a\x79","\x68\x69\x64\x65\x41\x63\x74\x69\x6f\x6e\x53\x68\x65\x65\x74"),{showSimpleActionSheet:G}=o.findByProps("\x73\x68\x6f\x77\x53\x69\x6d\x70\x6c\x65\x41\x63\x74\x69\x6f\x6e\x53\x68\x65\x65\x74");function x(e){return G({key:"\x52\x65\x76\x69\x65\x77\x4f\x76\x65\x72\x66\x6c\x6f\x77",header:{title:e.type!==3?`Review by ${e.sender.username}`:"\x52\x65\x76\x69\x65\x77\x44\x42\x20\x53\x79\x73\x74\x65\x6d\x20\x4d\x65\x73\x73\x61\x67\x65",onClose:function(){return H()}},options:[{label:"\x43\x6f\x70\x79\x20\x54\x65\x78\x74",onPress:function(){t.clipboard.setString(e.comment),m.showToast("\x43\x6f\x70\x69\x65\x64\x20\x52\x65\x76\x69\x65\x77\x20\x54\x65\x78\x74",d.getAssetIDByName("\x69\x63\x5f\x6d\x65\x73\x73\x61\x67\x65\x5f\x63\x6f\x70\x79"))}},...a.storage.authToken&&e.type!==3?[...A(e)?[{label:"\x44\x65\x6c\x65\x74\x65\x20\x52\x65\x76\x69\x65\x77",isDestructive:!0,onPress:function(){return b.showConfirmationAlert({title:"\x44\x65\x6c\x65\x74\x65\x20\x52\x65\x76\x69\x65\x77",content:"\x41\x72\x65\x20\x79\x6f\x75\x20\x73\x75\x72\x65\x20\x79\x6f\x75\x20\x77\x61\x6e\x74\x20\x74\x6f\x20\x64\x65\x6c\x65\x74\x65\x20\x74\x68\x69\x73\x20\x72\x65\x76\x69\x65\x77\x3f",confirmText:"\x59\x65\x73",cancelText:"\x4e\x6f",confirmColor:"\x72\x65\x64",onConfirm:function(){return _(e.sender.discordID,e.id)}})}}]:[],{label:"\x52\x65\x70\x6f\x72\x74\x20\x52\x65\x76\x69\x65\x77",isDestructive:!0,onPress:function(){return b.showConfirmationAlert({title:"\x52\x65\x70\x6f\x72\x74\x20\x52\x65\x76\x69\x65\x77",content:"\x41\x72\x65\x20\x79\x6f\x75\x20\x73\x75\x72\x65\x20\x79\x6f\x75\x20\x77\x61\x6e\x74\x20\x74\x6f\x20\x72\x65\x70\x6f\x72\x74\x20\x74\x68\x69\x73\x20\x72\x65\x76\x69\x65\x77\x3f",confirmText:"\x59\x65\x73",cancelText:"\x4e\x6f",confirmColor:"\x72\x65\x64",onConfirm:function(){return B(e.id)}})}}]:[]]})}function W(e){let{badge:n}=e;return React.createElement(t.ReactNative.Pressable,{style:{marginLeft:4},onPress:function(){m.showToast(n.name,{uri:n.icon})}},React.createElement(t.ReactNative.Image,{source:{uri:n.icon,width:16,height:16}}))}const k=t.stylesheet.createThemedStyleSheet({row:{flexDirection:"\x72\x6f\x77",alignItems:"\x63\x65\x6e\x74\x65\x72"}}),{FormLabel:q}=v.Forms;function K(e){let{username:n,badges:r}=e;return React.createElement(t.ReactNative.View,{style:k.row},React.createElement(q,{text:n,style:{color:w("\x54\x45\x58\x54\x5f\x4e\x4f\x52\x4d\x41\x4c")}}),React.createElement(t.ReactNative.View,{style:k.row},r.map(function(s){return React.createElement(W,{badge:s})})))}const Q=t.stylesheet.createThemedStyleSheet({avatar:{height:36,width:36,borderRadius:18}}),{FormRow:Z,FormSubLabel:ee}=v.Forms;function te(e){let{review:n}=e;return React.createElement(Z,{label:React.createElement(K,{username:n.sender.username,badges:n.sender.badges}),subLabel:React.createElement(ee,{text:n.comment,style:{color:w("\x54\x45\x58\x54\x5f\x4e\x4f\x52\x4d\x41\x4c")}}),leading:React.createElement(t.ReactNative.Image,{style:Q.avatar,source:{uri:n.sender.profilePhoto}}),onLongPress:function(){return x(n)}})}const g=t.stylesheet.createThemedStyleSheet({container:{flex:1,flexDirection:"\x72\x6f\x77",alignItems:"\x63\x65\x6e\x74\x65\x72",justifyContent:"\x63\x65\x6e\x74\x65\x72",paddingHorizontal:8,paddingVertical:4},textInput:{flex:1,flexGrow:1,fontSize:16,fontFamily:t.constants.Fonts.DISPLAY_MEDIUM},sendButton:{flexShrink:1,flexDirection:"\x72\x6f\x77",alignItems:"\x63\x65\x6e\x74\x65\x72",justifyContent:"\x63\x65\x6e\x74\x65\x72",minHeight:40,minWidth:40,borderRadius:999}}),{useThemeContext:ne}=o.findByProps("\x75\x73\x65\x54\x68\x65\x6d\x65\x43\x6f\x6e\x74\x65\x78\x74");function re(e){let{userId:n,shouldEdit:r,refetch:s}=e;S.useProxy(a.storage);const[i,u]=t.React.useState(""),l=!a.storage.authToken,F=!a.storage.authToken||i.length===0;return t.React.createElement(t.ReactNative.View,{style:g.container},t.React.createElement(t.ReactNative.TextInput,{style:{...g.textInput,color:w("\x54\x45\x58\x54\x5f\x4e\x4f\x52\x4d\x41\x4c")},editable:!l,placeholder:l?"\x59\x6f\x75\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x61\x75\x74\x68\x65\x6e\x74\x69\x63\x61\x74\x65\x64\x20\x74\x6f\x20\x61\x64\x64\x20\x61\x20\x72\x65\x76\x69\x65\x77\x2e":`Tap to ${r?"\x65\x64\x69\x74\x20\x79\x6f\x75\x72":"\x61\x64\x64\x20\x61"} review`,placeholderTextColor:w("\x49\x4e\x50\x55\x54\x5f\x50\x4c\x41\x43\x45\x48\x4f\x4c\x44\x45\x52\x5f\x54\x45\x58\x54"),value:i,onChangeText:function(y){return u(y)}}),t.React.createElement(t.ReactNative.Pressable,{style:{...g.sendButton,backgroundColor:a.storage.useThemedSend&&ne().primaryColor||E.rawColors.BRAND_500,opacity:F?.25:1},disabled:F,onPress:function(){P(n,i).then(function(y){u(""),s(),m.showToast(y.message,d.getAssetIDByName("\x43\x68\x65\x63\x6b"))}).catch(function(y){return m.showToast(y.message,d.getAssetIDByName("\x53\x6d\x61\x6c\x6c"))})}},t.React.createElement(t.ReactNative.Image,{style:{tintColor:"\x23\x66\x66\x66"},source:d.getAssetIDByName("\x69\x63\x5f\x73\x65\x6e\x64")})))}const{getCurrentUser:ae}=o.findByStoreName("\x55\x73\x65\x72\x53\x74\x6f\x72\x65"),oe=o.findByName("\x55\x73\x65\x72\x50\x72\x6f\x66\x69\x6c\x65\x53\x65\x63\x74\x69\x6f\x6e");function ie(e){let{userId:n}=e;const[r,s]=t.React.useState([]),i=function(){N(n).then(function(l){return s(l)})};t.React.useEffect(i,[]);const u=r.filter(function(l){return l.sender.discordID===ae()?.id}).length!==0;return t.React.createElement(v.ErrorBoundary,null,t.React.createElement(oe,{title:"\x52\x65\x76\x69\x65\x77\x73",showContainer:!0},t.React.createElement(t.ReactNative.View,{style:{flex:1}},r.map(function(l){return t.React.createElement(te,{review:l})})),t.React.createElement(re,{userId:n,refetch:i,shouldEdit:u})))}const se=o.findByTypeName("\x55\x73\x65\x72\x50\x72\x6f\x66\x69\x6c\x65");function ce(){return O.after("\x74\x79\x70\x65",se,function(e,n){const r=M.findInReactTree(n,function(i){return i?.type?.displayName==="\x56\x69\x65\x77"&&i?.props?.children.findIndex(function(u){return u?.type?.name==="\x55\x73\x65\x72\x50\x72\x6f\x66\x69\x6c\x65\x42\x69\x6f"})!==-1})?.props?.children,s=e[0]?.userId;r?.push(t.React.createElement(ie,{userId:s}))})}const{pushModal:ue,popModal:U}=o.findByProps("\x70\x75\x73\x68\x4d\x6f\x64\x61\x6c"),le=o.findByName("\x4f\x41\x75\x74\x68\x32\x41\x75\x74\x68\x6f\x72\x69\x7a\x65\x4d\x6f\x64\x61\x6c");function L(){return ue({key:"\x6f\x61\x75\x74\x68\x32\x2d\x61\x75\x74\x68\x6f\x72\x69\x7a\x65",modal:{key:"\x6f\x61\x75\x74\x68\x32\x2d\x61\x75\x74\x68\x6f\x72\x69\x7a\x65",modal:le,animation:"\x73\x6c\x69\x64\x65\x2d\x75\x70",shouldPersistUnderModals:!1,props:{clientId:I,redirectUri:h+"\x2f\x61\x75\x74\x68",scopes:["\x69\x64\x65\x6e\x74\x69\x66\x79"],responseType:"\x63\x6f\x64\x65",permissions:0n,cancelCompletesFlow:!1,callback:async function(e){let{location:n}=e;try{const r=new URL(n);r.searchParams.append("\x72\x65\x74\x75\x72\x6e\x54\x79\x70\x65","\x6a\x73\x6f\x6e"),r.searchParams.append("\x63\x6c\x69\x65\x6e\x74\x4d\x6f\x64","\x76\x65\x6e\x64\x65\x74\x74\x61");const{token:s,success:i,message:u}=await c(r,{headers:{accept:"\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2f\x6a\x73\x6f\x6e"}});if(i)a.storage.authToken=s;else throw U("\x6f\x61\x75\x74\x68\x32\x2d\x61\x75\x74\x68\x6f\x72\x69\x7a\x65"),new Error(u)}catch(r){z.logger.error("\x41\x75\x74\x68\x6f\x72\x69\x7a\x61\x74\x69\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64\x21",r)}},dismissOAuthModal:function(){return U("\x6f\x61\x75\x74\x68\x32\x2d\x61\x75\x74\x68\x6f\x72\x69\x7a\x65")}},closable:!0}})}function de(){return globalThis.vendettaRDB={api:Y,utils:{...X,showAuthModal:L,showReviewActionSheet:x},constants:j},function(){return delete globalThis.vendettaRDB}}const{FormSection:$,FormRow:f,FormSwitchRow:he,FormDivider:fe}=v.Forms;function we(){return S.useProxy(a.storage),React.createElement(t.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement($,{title:"\x41\x75\x74\x68\x65\x6e\x74\x69\x63\x61\x74\x69\x6f\x6e",titleStyleType:"\x6e\x6f\x5f\x62\x6f\x72\x64\x65\x72"},React.createElement(f,{label:"\x41\x75\x74\x68\x65\x6e\x74\x69\x63\x61\x74\x65\x20\x77\x69\x74\x68\x20\x52\x65\x76\x69\x65\x77\x44\x42",leading:React.createElement(f.Icon,{source:d.getAssetIDByName("\x63\x6f\x70\x79")}),trailing:f.Arrow,onPress:L}),React.createElement(fe,null),React.createElement(f,{label:"\x4c\x6f\x67\x20\x6f\x75\x74\x20\x6f\x66\x20\x52\x65\x76\x69\x65\x77\x44\x42",subLabel:"\x4e\x6f\x74\x65\x20\x74\x68\x61\x74\x20\x74\x68\x69\x73\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x72\x65\x6d\x6f\x76\x65\x20\x52\x65\x76\x69\x65\x77\x44\x42\x20\x66\x72\x6f\x6d\x20\x79\x6f\x75\x72\x20\x41\x75\x74\x68\x6f\x72\x69\x7a\x65\x64\x20\x41\x70\x70\x73\x20\x70\x61\x67\x65\x20\x69\x6e\x20\x44\x69\x73\x63\x6f\x72\x64\x2e",leading:React.createElement(f.Icon,{source:d.getAssetIDByName("\x69\x63\x5f\x6c\x6f\x67\x6f\x75\x74\x5f\x32\x34\x70\x78")}),disabled:a.storage.authToken.length===0,onPress:function(){return a.storage.authToken=""}})),React.createElement($,{title:"\x53\x65\x74\x74\x69\x6e\x67\x73"},React.createElement(he,{label:"\x55\x73\x65\x20\x70\x72\x6f\x66\x69\x6c\x65\x2d\x74\x68\x65\x6d\x65\x64\x20\x73\x65\x6e\x64\x20\x62\x75\x74\x74\x6f\x6e",subLabel:"\x43\x6f\x6e\x74\x72\x6f\x6c\x73\x20\x77\x68\x65\x74\x68\x65\x72\x20\x74\x68\x65\x20\x72\x65\x76\x69\x65\x77\x20\x73\x65\x6e\x64\x20\x62\x75\x74\x74\x6f\x6e\x20\x73\x68\x6f\x75\x6c\x64\x20\x61\x74\x74\x65\x6d\x70\x74\x20\x74\x6f\x20\x6d\x61\x74\x63\x68\x20\x74\x68\x65\x20\x75\x73\x65\x72\x27\x73\x20\x70\x72\x6f\x66\x69\x6c\x65\x20\x63\x6f\x6c\x6f\x72\x73\x2e",leading:React.createElement(f.Icon,{source:d.getAssetIDByName("\x69\x63\x5f\x70\x61\x69\x6e\x74\x5f\x62\x72\x75\x73\x68")}),value:a.storage.useThemedSend,onValueChange:function(e){return a.storage.useThemedSend=e}})))}a.storage.authToken??="",a.storage.useThemedSend??=!0;const ye=[de(),ce()],T=[];D().then(function(e){return T.push(...e)});const Re=function(){return ye.forEach(function(e){return e()})};return R.admins=T,R.onUnload=Re,R.settings=we,R})({},vendetta.plugin,vendetta.metro,vendetta.ui,vendetta.metro.common,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.ui.alerts,vendetta.ui.toasts,vendetta.ui.assets,vendetta.storage,vendetta);
